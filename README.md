Bike Lights Control
===============

Bike Lights Control is a [widget](https://developer.garmin.com/connect-iq/connect-iq-basics/widgets/) IQ Connect application for Garmin devices, that allows to manually control ANT+ lights.

| Light Panel | Lights Menu | Light Menu |
| :---------: | :---------: | :--------: |
| <img src="/Images/LightsPanel.png?raw=true"> | <img src="/Images/LightsMenu.png?raw=true"> | <img src="/Images/LightMenu.png?raw=true"> |

## Features
- Configurable full screen light panel for fast switching modes (only for Edge devices with a touch screen)
- Switching modes by using a menu (only for devices without a touch screen)

## How to use

1. Download the widget from Garmin Connect Store and synchronize your Garmin device
2. Pair your bike lights with your Garmin device ([Garmin manual](https://www8.garmin.com/manuals/webhelp/variaut/EN-US/GUID-C4BB544A-78FA-4B3E-9061-2371B7B3C558.html))
3. Configure your paired lights with the [Lights Configurator](https://maca88.github.io/BikeLightsControl/) (In case your light is not on the list, check [this thread](https://forums.garmin.com/developer/connect-iq/f/showcase/248492/data-field-smart-bike-lights))
4. Copy the final configuration value from [Lights Configurator](https://maca88.github.io/BikeLightsControl/) into the application setting: `Lights Configuration` by using Garmin Connect Mobile or Garmin Express

## Control modes

| Name | Description |
| :--- | :---------- |
| Network (**N**) | Light is controlled by the Garmin [Light mode](https://www8.garmin.com/manuals/webhelp/variabikelights/EN-US/GUID-73B08487-BA57-4EF0-A253-D226E229BC68.html) |
| Manual (**M**) | Light is controlled by the user |

**NOTE:** As the widget is stateless, the control mode will not be preserved on reopening and Network control mode will be assumed to be the current one.

## Settings

- **Button color:** The color of the light panel buttons
- **Lights Configuration:** The configuration value generated by the [Lights Configurator](https://maca88.github.io/BikeLightsControl/)
- **Background Color:** The background color

## Currently registered ANT+ lights:

- Bontrager Ion Pro RT
- Bontrager Ion 200 RT
- Bontrager Flare RT
- Garmin Varia RTL510
- Garmin Varia RTL515
- Garmin Varia HL500

**NOTE:** In case your ANT+ light is not on the list, please check the following garmin thread: https://forums.garmin.com/developer/connect-iq/f/showcase/248492/data-field-smart-bike-lights

## Error codes

The following errors can be displayed:
- **Error 1:** A not supported light type is connected, only headlights and taillights are supported.
- **Error 2:** Two or more lights of the same type are connected to the network, which is not supported.
- **Error 3:** Configuration value is invalid.
- **Error 4:** Light panel contains a light mode that the connected light does not support.